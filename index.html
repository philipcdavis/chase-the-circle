 <!DOCTYPE html>

<html>
<head>
    <title>d3 Bokeh</title>
    <style type="text/css">
        #chart {
            border: 1px solid #ccc;
            width: 1000px;
            height: 500px;
        }
        
        text {
            font-family: helvetica, arial, sans-serif;
            font-size: 60px;
            color: #444;
        }
        
        #score {
            float: right;
        }
        
        #time {
            float: left;
        }
        
        .container {
            width: 1000px;
        }

    </style>
</head>

<body>

    <div class="container">
        <div id="chart"></div>
        <div id="score"></div>
        <div id="time"></div>
        <div id="replay"></div>
    </div>
    
    
    
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript">
        var width = 1000;
        var height = 500;
        var clickable = true;
        var padding = 60;
        var score = 1;
        var timeLeft;
        var intervalTimer;
        
        var svg = d3.select("#chart")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        
        
        var dot = svg.append("circle")
            .attr("r", 50)
            .attr("cy", 250)
            .attr("cx", 500)
            .attr("fill", "hsl(" + (Math.random() * 360) + ",95%,60%)")
            .on('click', function () {       
               update();
               points.text(score++);
             });
        
        var overlay = svg.append("rect")
            .transition()
            .duration(100)
            .attr("height", height)
            .attr("width", width)
            .attr("fill", "#355b85")
            .attr("fill-opacity", .4);
        
       
        
        var points = d3.select("#score")
            .append("text")
            .text("0");
        
        var time = d3.select("#time")
            .append("text")
            .text("15.00");
         
        
        var update = function(){
            dot
            .transition()
            .duration(100)
            .attr("fill", "hsl(" + (Math.random() * 360) + ",95%,60%)")
            .attr("r", (Math.random() * 40) + 20)
            .attr("cy", Math.random() * 500)
            .attr("cx", Math.random() * 1000);
        }
        
        var startGame = function() {
            score = 0;
            timeLeft = 15000;
            overlay.attr("height", 0);
            intervalTimer = setInterval(timer, 100);
        };
        startGame();
        
        function timer() {
           timeLeft = timeLeft - 100;
            time.text(function(d) { return timeLeft / 1000 });
            if (timeLeft === 0) {
                endGame();
                clearInterval(intervalTimer);
            }
        }
        
        function endGame() {
            overlay.attr("height", height);
            dot
                .transition()
                .duration(100)
                .attr("r", 50)
                .attr("cy", 250)
                .attr("cx", 500);
        }
        var restart = function(){
            startGame();
        }
        
        var replay = d3.select("#replay")
            .append("text")
            .text("Start Over")
            .attr("class","btn")
            .on("click", function(){
                restart();
            });

    </script>
</body>
</html>
